(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1638:function(e,t,n){"use strict";var o=n(1);t.a=function(e){Object(o.useEffect)(function(){var t=function(){e()};return window.addEventListener("beforeunload",t),function(){window.removeEventListener("beforeunload",t),e()}},[e])}},2329:function(e,t,n){e.exports={bundleRecommendations:"styles__bundleRecommendations--2fppa",busy:"styles__busy--1lMNK",close:"styles__close--gKylx",desktop:"styles__desktop--1BTEd",mobile:"styles__mobile--SQ5V_",productImage:"styles__productImage--2s15T",description:"styles__description--32MHn",productCard:"styles__productCard--2t5SD",productGrid:"styles__productGrid--24KNu",discountedPrice:"styles__discountedPrice--p70hl"}},2363:function(e,t,n){"use strict";n.r(t);var o,a=n(1),i=n.n(a),r=n(39),s=n.n(r),c=n(1288),d=n.n(c),l=n(18),u=n(105),m=n(32),p=n(17),f=n.n(p),y=n(4),g=n(23),v=n(7),b=n(1284),h=n(2),w=n(162),k=n(1372),I=n(190),x=n(2329),B=n.n(x),C=n(349),O=n(0),j=n.n(O),S=n(78),T=n(1525),R=n(1299),D=n(100),M=n(1378),P=n(1842),_=n(1377),E=n(1352),N=n(1361),A=n(1604);function L(e,t,n,a){o||(o="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={children:void 0}),t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});if(1===r)t.children=a;else if(r>1){for(var c=new Array(r),d=0;d<r;d++)c[d]=arguments[d+3];t.children=c}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var V=L(T.a,{}),q=L(v.a,{type:"caption",muted:!0,marginBottom:"m",marginLeft:"xxs","data-testid":"vat-message"},void 0,L(C.a,{id:"shared.components.BundleRecommendations.761544404",defaultMessage:"incl. VAT","data-react-ds-adoption":!0})),$=L(y.a,{display:"flex"},void 0,L(v.a,{type:"caption",muted:!0,marginBottom:"m",marginLeft:"xxs"},void 0,L(C.a,{id:"shared.components.BundleRecommendations.761544404",defaultMessage:"incl. VAT","data-react-ds-adoption":!0}))),z=L(C.a,{id:"shared.components.BundleRecommendations.3300111594",defaultMessage:"View Cart","data-react-ds-adoption":!0}),F=function(e){var t=e.inventoryItem,n=e.work,o=e.profile,a=e.messages,i=e.showStrikethroughPricing,r=t.price,c=n.title,d=Object(D.c)().userInfo,u=Object(E.a)(t),m=Object(N.b)(t,a),p=i?[u,m].sort(function(e,t){return null==f()(e,"discountPercent")?1:null==f()(t,"discountPercent")?-1:t.discountPercent-e.discountPercent})[0]:m,b=f()(t,"attributes")||[],w=f()(t,"description",null),k=Object(R.g)(b,"defaultText").join(", "),I=f()(d,"country"),x=function(e){var t=e.inventoryItem,n=e.work,o=e.userInfo;if(n.isMatureContent&&!o.showMatureContent)return Object(M.a)(o.locale);var a=f()(t,"previewSet.previews",[]).find(function(e){return"product_close"===e.previewTypeId});return a&&a.url?a.url:null}({inventoryItem:t,work:n,userInfo:d});return L("div",{style:{minWidth:"100%"},"data-testid":"item-summary"},void 0,L(y.a,{display:"flex",alignItems:"center",justifyContent:"space-between"},void 0,L(y.a,{style:{minWidth:0}},void 0,L(y.a,{display:"flex",alignItems:"center",marginRight:"xs",marginBottom:"xs"},void 0,L(y.a,{marginRight:"xs"},void 0,L("div",{className:B.a.productImage,"data-react-ds-adoption":!0},void 0,V,L(S.a,{src:x,roundedCorners:!0}))),L(y.a,{flex:"1",style:{minWidth:0}},void 0,L(v.a,{lineClamp:1,display:"block",type:"display5"},void 0,s()(c,["Text","Box","Button","constants","Image","CheckDiscIcon"])),L(v.a,{lineClamp:1,display:"block",type:"body2"},void 0,s()(w,["Text","Box","Button","constants","Image","CheckDiscIcon"])),L(v.a,{lineClamp:1,display:"block",type:"caption"},void 0,s()(k,["Text","Box","Button","constants","Image","CheckDiscIcon"])),s()(r&&!p&&L(v.a,{type:"display5",display:"block"},void 0,L(l.FormattedNumber,{value:r.amount,style:"currency",currency:r.currency,"data-react-ds-adoption":!0}),s()(Object(P.b)(I)&&q,["Text","Box","Button","constants","Image","CheckDiscIcon"])),["Text","Box","Button","constants","Image","CheckDiscIcon"]),s()(r&&p&&L(v.a,{type:"display5",display:"block"},void 0,L(y.a,{element:"span",className:B.a.discountedPrice},void 0,L(l.FormattedNumber,{value:p.discountedPrice,style:"currency",currency:r.currency,"data-react-ds-adoption":!0})),L(v.a,{type:"caption",muted:!0,marginBottom:"m",marginLeft:"xs"},void 0,L(_.a,{price:t.price.amount,currency:t.price.currency,discountPercent:p.discountPercent,"data-react-ds-adoption":!0})),s()(Object(P.b)(I)&&$,["Text","Box","Button","constants","Image","CheckDiscIcon"])),["Text","Box","Button","constants","Image","CheckDiscIcon"])))),s()(o===h.w?L(g.a,{onClick:function(){window.location.href="/cart"},intent:h.y,size:h.v,"data-testid":"view-cart-btn"},void 0,z):null,["Text","Box","Button","constants","Image","CheckDiscIcon"])))};F.propTypes={inventoryItem:j.a.shape({id:j.a.string.isRequired,description:j.a.string.isRequired,price:j.a.shape({amount:j.a.number.isRequired,currency:j.a.string.isRequired}),productTypeId:j.a.string,productPageUrl:j.a.string.isRequired,gaCode:j.a.string,gaCategory:j.a.string}),work:j.a.shape({id:j.a.string,title:j.a.string,isMatureContent:j.a.bool,artistName:j.a.string}),profile:j.a.string,messages:j.a.arrayOf(j.a.shape({applied:j.a.bool,discount_key:j.a.string,severity:j.a.string,text:j.a.string,type:j.a.string,action_url:j.a.string})),showStrikethroughPricing:j.a.bool},F.defaultProps={inventoryItem:{},work:{},messages:[],profile:h.w,showStrikethroughPricing:!1};var U,W,G,K,J,H=Object(m.d)(A.a)(F),Q=n(1667),Y=n(1498),X=n(1663),Z=n(243),ee=n(1501),te=n(1292),ne=n(1500),oe=n(1638),ae=n(1686),ie=n(1526),re=n(1527),se=n(1362),ce=n(1474),de=n.n(ce),le=n(1499),ue=n(1664),me=n(1846),pe=n(1503),fe=n(1293),ye=n(42),ge=n(1562),ve=n(1662),be=n(129),he=n(1315),we=n(1319);function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){Be(e,t,n[t])})}return e}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,a=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(c){a=!0,i=c}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function xe(e,t,n,o){J||(J="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var r in a)void 0===t[r]&&(t[r]=a[r]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=new Array(i),c=0;c<i;c++)s[c]=arguments[c+3];t.children=s}return{$$typeof:J,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ce=Object(l.defineMessages)({similarDesigns:(U={id:"shared.components.BundleRecommendations.similarDesigns"},Be(U,"id","shared.components.BundleRecommendations.similarDesigns"),Be(U,"defaultMessage","Similar designs"),U),similarDesignsStickers:(W={id:"shared.components.BundleRecommendations.similarDesignsStickers"},Be(W,"id","shared.components.BundleRecommendations.similarDesignsStickers"),Be(W,"defaultMessage","Stickers you might also like"),W),next:(G={id:"shared.components.BundleRecommendations.next"},Be(G,"id","shared.components.BundleRecommendations.next"),Be(G,"defaultMessage","Next"),G),back:(K={id:"shared.components.BundleRecommendations.back"},Be(K,"id","shared.components.BundleRecommendations.back"),Be(K,"defaultMessage","Back"),K)}),Oe=function(e){var t=e.title,n=e.caption;return xe(y.a,{className:B.a.productCard},void 0,xe(ue.a,{title:t,caption:n,"data-react-ds-adoption":!0}))};Oe.propTypes={title:j.a.string,caption:j.a.string},Oe.defaultProps={title:"",caption:""};var je=xe(le.a,{color:"var(--ds-color-border-light)",marginY:"m"}),Se=function(e){var t=e.inventoryItemId,n=e.intl,o=e.testId,r=e.showMatureContent,c=Object(we.a)(),d=Object(D.c)().userInfo,l=Object(te.a)().logEvent,u=Object(he.b)(d.enrolments,"bx-atc-recs-stickers"),m=Object(he.a)(d.enrolments,"bx-atc-recs-stickers"),p=u&&"variant"===m,g=Object(me.a)({userInfo:d,inventoryItemId:t,productTypeId:p?"sticky-runners":void 0,ssr:!1,trackRecommendationsCallback:function(e){l({analytics:Z.w.ATCDrawerRecommendationsShowed(e.length)})}}),b=g.similarDesigns,h=g.similarDesignsLoading,w=Object(ge.a)(),I=(Object(a.useContext)(Y.b)||{}).carouselUUID,x=Object(a.useMemo)(function(){if(null===b)return[];var e=b.map(function(e){return f()(e,"inventoryItem")}).filter(Boolean);return Object(pe.a)({inventoryItems:e},n,{showArtistName:!0,showWorkTitle:!0,showDescription:!0,previewType:fe.h,useDefaultPreviewType:!1})},[b,n]),C=Object(ve.a)(x),O=Ie(Object(a.useState)([]),2),j=O[0],S=O[1];Object(a.useEffect)(function(){S(x.map(function(){return!1}))},[x]);if(!Array.isArray(b)||!b.length&&!h)return null;var T=h?new Array(8).fill({}):x;return xe(se.a,{},void 0,function(e){var t=e.inView,a=e.ref;return i.a.createElement(y.a,{ref:a,"data-testid":o},je,xe(k.a,{spacing:"m"},void 0,xe(v.a,{id:"similar-designs-title",type:"display3"},void 0,s()(p?n.formatMessage(Ce.similarDesignsStickers):n.formatMessage(Ce.similarDesigns),["Box","Divider","Text","Stack"])),xe(y.a,{className:B.a.productGrid},void 0,s()(T.map(function(e,o){var a=f()(e,"href")?Object(ye.n)(e.href,I):void 0;return h?xe(Oe,{title:"Loading..","data-react-ds-adoption":!0},"product-swiper-card-".concat(o)):xe(se.a,{onChange:function(e){return n=t,a=e,i=o,S(j.map(function(e,t){return t===i?a:e})),void(!h&&n&&C&&de()(C,100));var n,a,i},className:B.a.productCard,"data-react-ds-adoption":!0},"slide_".concat(o),xe(ue.b,{product:ke(ke({},e),{},{href:a}),intl:n,showMatureContent:r,showStrikethroughPricing:c,loading:h,onClick:function(){w({product:e,idx:o,url:e.href})}},"product-swiper-card-".concat(o)))}),["Box","Divider","Text","Stack"]))))})};Se.displayName="ProductRecommendationsGrid",Se.propTypes={inventoryItemId:j.a.string,intl:be.b.isRequired,testId:j.a.string,showMatureContent:j.a.bool},Se.defaultProps={inventoryItemId:null,testId:"",showMatureContent:!1};var Te,Re,De,Me,Pe,_e=Se;function Ee(e,t,n,o){Pe||(Pe="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&a)for(var r in a)void 0===t[r]&&(t[r]=a[r]);else t||(t=a||{});if(1===i)t.children=o;else if(i>1){for(var s=new Array(i),c=0;c<i;c++)s[c]=arguments[c+3];t.children=s}return{$$typeof:Pe,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,a=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(c){a=!0,i=c}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"BundleRecommendationsComponent",function(){return qe});var Le=Object(l.defineMessages)({accessibleTitle:(Te={id:"shared.components.BundleRecommendations.accessibleTitle"},Ae(Te,"id","shared.components.BundleRecommendations.accessibleTitle"),Ae(Te,"defaultMessage","Item summary"),Te),title:(Re={id:"shared.components.BundleRecommendations.title"},Ae(Re,"id","shared.components.BundleRecommendations.title"),Ae(Re,"defaultMessage","It's in the cart!"),Re),viewCart:(De={id:"shared.components.BundleRecommendations.viewCart"},Ae(De,"id","shared.components.BundleRecommendations.viewCart"),Ae(De,"defaultMessage","View cart"),De),keepShopping:(Me={id:"shared.components.BundleRecommendations.keepShopping"},Ae(Me,"id","shared.components.BundleRecommendations.keepShopping"),Ae(Me,"defaultMessage","Keep shopping"),Me)}),Ve=Ee(w.a,{}),qe=function(e){var t=e.profile,n=e.intl,o=e.inventoryItem,i=e.work,r=Object(ee.b)(),c=r.bundleRecommendationsOpen,l=r.closeBundleRecommendations,u=Object(te.a)().logEvent,m=Object(I.useSessionContext)().isBot,p=Object(ne.b)().sendImpressions,w=Object(ie.a)(),x=w.fetchMessages,C=w.cartMessages,O=Ne(Object(a.useState)(!1),2),j=O[0],S=O[1],T=f()(o,"gaCategory");Object(a.useEffect)(function(){c&&x()},[x,c]),Object(a.useEffect)(function(){j||(m||x(),S(!0))},[x,j,m]);var R=t===h.w,D=R?"m":"l",M=R?"xl":"xxxl",P=function(e){var t=e.componentName;u({analytics:Z.w.productPageComponentShowed(t)})};Object(oe.a)(function(){p(Z.v)});var _=Ee(H,{inventoryItem:o,work:i,profile:t,messages:C,"data-react-ds-adoption":!0}),E=Ee(re.a,{messages:C,category:T,"data-react-ds-adoption":!0});return Ee(b.a,{accessibleTitle:n.formatMessage(Le.accessibleTitle),from:R?h.a:h.E,size:R?h.t:h.F,fit:!R,open:c,onCloseRequested:l,allowClicksOutsideWhenActive:!0},void 0,s()(function(e){var t,a=e.close;return Ee(y.a,{className:d()(B.a.bundleRecommendations,(t={},Ae(t,B.a.desktop,!R),Ae(t,B.a.mobile,R),t)),padding:D,paddingTop:M},void 0,Ee(y.a,{className:B.a.close,padding:D},void 0,Ee(g.a,{id:"close-button-item-summary-drawer",strong:!0,size:h.F,circle:!0,iconBefore:Ve,onClick:a})),Ee(y.a,{paddingBottom:"s"},void 0,Ee(v.a,{type:"display2"},void 0,s()(n.formatMessage(Le.title),["Box","Button","Text","Drawer","constants","CloseIcon","Stack"]))),_,s()(!R&&Ee(k.a,{spacing:"s",paddingTop:"m","data-testid":"navigation-stack"},void 0,Ee(g.a,{size:h.t,strong:!0,intent:h.y,fluid:!0,href:"/cart",onClick:function(){return u({analytics:Z.w.ATCDrawerCartViewed()})}},void 0,s()(n.formatMessage(Le.viewCart),["Box","Button","Text","Drawer","constants","CloseIcon","Stack"])),Ee(g.a,{size:h.t,fluid:!0,onClick:a},void 0,s()(n.formatMessage(Le.keepShopping),["Box","Button","Text","Drawer","constants","CloseIcon","Stack"]))),["Box","Button","Text","Drawer","constants","CloseIcon","Stack"]),E,Ee(y.a,{className:d()(Ae({},B.a.desktop,!R))},void 0,Ee(Y.a,{category:Z.v,component:Z.d,customLabel:Z.c,isEnhancedEcommerceEnabled:!0,isCarouselUUIDEnabled:!0,"data-react-ds-adoption":!0},void 0,Ee(X.a,{component:Z.d},void 0,Ee(Q.a,{onFirstView:P,componentName:Z.d},void 0,Ee(_e,{intl:n,inventoryItemId:f()(o,"id")}))))))},["Box","Button","Text","Drawer","constants","CloseIcon","Stack"]))};t.default=Object(m.d)(u.c,ae.a)(qe)}}]);
//# sourceMappingURL=bundle_recommendations-3f6ac38bf3fa2ddaf229.js.map